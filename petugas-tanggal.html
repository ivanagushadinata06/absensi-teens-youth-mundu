<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Pilih Tanggal Ibadah</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="css/petugas.css">
</head>

<body>
<div class="header-corner">
  <button class="btn-back-corner" onclick="history.back()">←</button>
  <button class="btn-logout-corner" onclick="logout()">Logout</button>
</div>
<br>
<h2 id="judulTanggal"></h2>

<h2 id="judulBulan"></h2>

<div class="card">
  <div id="tanggalContainer"></div>
</div>

<!-- Firebase (HANYA untuk logout) -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="js/firebase.js"></script>

<script>
/* ===============================
   LOGIC TANGGAL (TANPA AUTH)
================================ */
const params = new URLSearchParams(window.location.search);
const bulanIndex = parseInt(params.get("bulan"));

const namaBulan = [
  "Januari","Februari","Maret","April","Mei","Juni",
  "Juli","Agustus","September","Oktober","November","Desember"
];

const tahun = 2026;

if (isNaN(bulanIndex)) {
  document.getElementById("judulBulan").innerText = "Bulan tidak valid";
} else {
  document.getElementById("judulBulan").innerText =
    `Pilih Tanggal Ibadah – ${namaBulan[bulanIndex]} ${tahun}`;

  const container = document.getElementById("tanggalContainer");
  container.innerHTML = "";

  const lastDay = new Date(tahun, bulanIndex + 1, 0).getDate();

  for (let tgl = 1; tgl <= lastDay; tgl++) {
    const d = new Date(tahun, bulanIndex, tgl);

    // hanya hari Minggu
    if (d.getDay() === 0) {
      const dd = String(tgl).padStart(2, "0");
      const label = `${dd} ${namaBulan[bulanIndex]} ${tahun}`;
      const iso =
        `${tahun}-${String(bulanIndex + 1).padStart(2,"0")}-${dd}`;

      const btn = document.createElement("button");
      btn.textContent = label;
      btn.style.display = "block";
      btn.style.width = "100%";
      btn.style.marginBottom = "10px";

      btn.onclick = () => {
        window.location.href =
          `petugas-absen.html?tanggal=${iso}&label=${encodeURIComponent(label)}`;
      };

      container.appendChild(btn);
    }
  }
}

function logout() {
  auth.signOut().then(() => {
    window.location.replace("index.html");
  });
}
</script>

</body>
</html>
